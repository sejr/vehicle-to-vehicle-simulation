<!DOCTYPE html>
<html lang="en" ng-app>
    <head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <link rel="stylesheet" href="http://maxcdn.bootstrapcdn.com/bootstrap/3.2.0/css/bootstrap.min.css">
        <link rel="stylesheet" href="http://sjr.io/networking/css/bootstrap.min.css">
        <!-- <link rel="stylesheet" href="http://sjr.io/networking/css/material.min.css"> -->
        <link rel="stylesheet" href="http://sjr.io/networking/css/main.css">
        <link rel="stylesheet" href="http://code.ionicframework.com/ionicons/1.5.2/css/ionicons.min.css">
        <link href="http://maxcdn.bootstrapcdn.com/bootstrap/3.2.0/css/bootstrap.min.css" rel="stylesheet">
        <link href="http://sjr.io/networking/css/ripples.min.css" rel="stylesheet">
        <link href="http://sjr.io/networking/css/material-wfont.min.css" rel="stylesheet">
        <link href="http://sjr.io/networking/css/alerts.css" rel="stylesheet">
        <link href="http://sjr.io/networking/css/snackbar.min.css" rel="stylesheet">
        <script src="https://cdn.socket.io/socket.io-1.2.0.js"></script>
        <!-- <script src="https://sjr.io/networking/js/ohsnap.js"></script> -->
        <script src="https://ajax.googleapis.com/ajax/libs/angularjs/1.3.5/angular.min.js"></script>
        <script src="http://code.jquery.com/jquery-1.11.1.js"></script>
        <script src="http://sjr.io/networking/js/snackbar.min.js"></script>
        <script src="http://refreshless.com/nouislider/source/distribute/jquery.nouislider.all.min.js"></script>
        <title>Human-Vehicle Integration</title>
    </head>
    <body class="language-javascript">
        <nav class="navbar navbar-inverse navbar-fixed-top" role="navigation">
            <div class="container">
                <div class="navbar-header">
                    <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false" aria-controls="navbar">
                    <span class="sr-only">Toggle navigation</span>
                    <span class="icon-bar"></span>
                    <span class="icon-bar"></span>
                    <span class="icon-bar"></span>
                    </button>
                    <a class="navbar-brand" href="/"><span class="ion-model-s" aria-hidden="true"></span>&nbsp; HVI</a>
                </div>
                <div id="navbar" class="navbar-collapse collapse">
                    <ul class="nav navbar-nav navbar-right">
                        <li><a href="/"><span class="ion-help-buoy" aria-hidden="true"></span>&nbsp; About</a></li>
                        <li class="active"><a href="/demo"><span class="ion-settings" aria-hidden="true"></span>&nbsp; Demo</a></li>
                        <li><a href="mailto:roth@computer.org"><span class="ion-paper-airplane" aria-hidden="true"></span>&nbsp; Contact</a></li>
                    </ul>
                    </div><!--/.nav-collapse -->
                </div>
            </nav>
            <div class="container">
                <h2>Demo</h2>
                <p>
                Below, you will see multiple sliders. These correspond to data that would normally be collected by sensors in the vehicle and on devices such as your smart watch. For the sake of this simulation, we allow you to manipulate these parameters and set custom thresholds. Appropriate alerts will be generated when these thresholds are crossed.
                </p>
                <div class="row">
                    <div class="col-md-6">
                        <h1 class="header page-header">Driver</h1>
                        <div class="sample1">
                            <h2>Blood Pressure <small><span id="blood-pressure-reading"></span></small></h2>
                            <div id="blood-pressure-slider" class="slider shor slider-material-red"></div>
                            <span id="blood-pressure-reading"></span>
                            <script>
                                $('#blood-pressure-slider').noUiSlider({
                                    start: 50,
                                    connect: "lower",
                                    range: {
                                        'min': 0,
                                        'max': 100
                                    }
                                });
                            </script>
                            <script>
                                $('#blood-pressure-slider').Link('lower').to($('#blood-pressure-reading'));
                            </script>

                            <h2>Heart Rate <small><span id="heart-rate-reading"></span></small></h2>
                            <div id="heart-rate-slider" class="slider shor slider-material-pink"></div>
                            <span id="heart-rate-reading"></span>
                            <script>
                                $('#heart-rate-slider').noUiSlider({
                                    start: 50,
                                    connect: "lower",
                                    range: {
                                        'min': 0,
                                        'max': 100
                                    }
                                });
                            </script>
                            <script>
                                $('#heart-rate-slider').Link('lower').to($('#heart-rate-reading'));
                            </script>
                        </div>
                    </div>
                    <div class="col-md-6">
                        <h1 class="header page-header">Vehicle</h1>
                        <div class="sample1">
                            <h2>Gasoline <small><span id="gasoline-reading"></span></small></h2>
                            <div id="gasoline-slider" class="slider shor slider-material-cyan"></div>
                            <span id="gasoline-reading"></span>
                            <script>
                                $('#gasoline-slider').noUiSlider({
                                    start: 50,
                                    connect: "lower",
                                    range: {
                                        'min': 0,
                                        'max': 100
                                    }
                                });
                            </script>
                            <script>
                                $('#gasoline-slider').Link('lower').to($('#gasoline-reading'));
                            </script>

                            <h2>Battery <small><span id="battery-reading"></span></small></h2>
                            <div id="battery-slider" class="slider shor slider-material-teal"></div>
                            <span id="battery-reading"></span>
                            <script>
                                $('#battery-slider').noUiSlider({
                                    start: 50,
                                    connect: "lower",
                                    range: {
                                        'min': 0,
                                        'max': 100
                                    }
                                });
                            </script>
                            <script>
                                $('#battery-slider').Link('lower').to($('#battery-reading'));
                            </script>
                        </div>
                    </div>
                </div>
            </div>
            <!-- Your site ends -->
            <script src="http://maxcdn.bootstrapcdn.com/bootstrap/3.2.0/js/bootstrap.min.js"></script>
            <script src="http://sjr.io/networking/js/ripples.min.js"></script>
            <script src="http://sjr.io/networking/js/material.min.js"></script>

            <script>
                var socket = io();

                var threshold = 75;
                setInterval(function(){

                    var blood_pressure = $("#blood-pressure-slider").val();
                    var message = "Your blood pressure is high."
                    if (blood_pressure > threshold) {
                        ohSnap(message, 'red');
                        socket.emit('alert', message);
                    }

                },2000);

                socket.on('alert', function(msg){
                    $.snackbar({content: msg});
                });
                </script>

        </body>
    </html>
